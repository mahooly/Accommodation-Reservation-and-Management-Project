{% extends 'base.html' %}

{% block main %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.min.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            var doughnutPieData = {
                datasets: [{
                    data: [{{ hotels }}, {{ motels }}, {{ houses }}],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.5)',
                        'rgba(54, 162, 235, 0.5)',
                        'rgba(255, 206, 86, 0.5)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)'
                    ]
                }],

                // These labels appear in the legend and in the tooltips when hovering different arcs
                labels: [
                    'هتل‌ها',
                    'متل‌ها',
                    'اقامتگاه‌های شخصی'
                ]
            };
            var doughnutPieOptions = {
                responsive: true,
                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            };
            var pieChartCanvas = $("#pieChart").get(0).getContext("2d");
            var pieChart = new Chart(pieChartCanvas, {
                type: 'pie',
                data: doughnutPieData,
                options: doughnutPieOptions
            });
        });
    </script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            var lineData = {
                datasets: [{
                    data: {{ user_count }}
                }],

                labels: {{ date_joined|safe }},

            };
            var lineOptions = {
                responsive: true,
                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            };
            var lineChartCanvas = $("#lineChart").get(0).getContext("2d");
            var myLineChart = new Chart(lineChartCanvas, {
                type: 'line',
                data: lineData,
                options: lineOptions
            });
        });
    </script>
    <div class="container">
        <div class="row">
            <div class="pull-right" style="margin-right: 20px;">
                <h1></h1>
            </div>
        </div>
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-warning" dir="rtl" role="alert"
                     style="padding: 5px; text-align: center;">
                    <p style="display: inline-block;">{{ message }}</p>
                </div>
            {% endfor %}
        {% endif %}
        <div class="row">
            <div class="col-md-9">
                {% block contents %}
                    <div class="col-lg-4 grid-margin stretch-card" dir="rtl">
                        <div class="card">
                            <div class="card-body">
                                <div class="chartjs-size-monitor"
                                     style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                    <div class="chartjs-size-monitor-expand"
                                         style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                        <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                                    </div>
                                    <div class="chartjs-size-monitor-shrink"
                                         style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                        <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                                    </div>
                                </div>
                                <h4 class="card-title">تعداد اقامتگاه‌ها</h4>
                                <canvas id="pieChart" style="height: 262px; display: block; width: 525px;"
                                        width="1500"
                                        height="1000"
                                        class="chartjs-render-monitor"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 grid-margin stretch-card" dir="rtl">
                        <div class="card">
                            <div class="card-body">
                                <div class="chartjs-size-monitor"
                                     style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                    <div class="chartjs-size-monitor-expand"
                                         style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                        <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                                    </div>
                                    <div class="chartjs-size-monitor-shrink"
                                         style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                        <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                                    </div>
                                </div>
                                <h4 class="card-title">تعداد کاربران</h4>
                                <canvas id="lineChart" style="height: 262px; display: block; width: 525px;"
                                        width="2000"
                                        height="1500"
                                        class="chartjs-render-monitor"></canvas>
                            </div>
                        </div>
                    </div>
                {% endblock %}
            </div>
            <div class="col-md-3">
                <div class="sidebar">
                    <div class="box filter">
                        <ul class="links" dir="rtl">
                            <li><a href="{% url 'admin_dashboard_users' %}">کاربران</a></li>
                            <li><a href="{% url 'admin_dashboard_accommodations' %}">اقامتگاه‌ها</a>
                                <ul class="links" dir="rtl">
                                    {% block auth %}
                                    {% endblock %}
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                {% block sidebar %}
                {% endblock %}
            </div>
        </div>
    </div>
{% endblock %}